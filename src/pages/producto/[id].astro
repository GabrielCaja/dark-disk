---
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const productos = await getCollection("productos");

  return productos.map((producto) => ({
    params: { id: producto.data.id.toString() },
    props: { producto },
  }));
}

interface Producto {
  data: {
    id: string;
    title: string;
    description: string;
    price: number;
    imageUrl: string;
  };
}

const { producto } = Astro.props as { producto: Producto };
const { title, description, price, imageUrl } = producto.data;
---

<Layout>
  <div
    class="container mx-auto p-4 flex justify-center items-center min-h-screen"
  >
    <div class="max-w-4xl bg-white rounded-xl shadow-md overflow-hidden">
      <div class="flex flex-col md:flex-row">
        <div class="md:flex-shrink-0">
          <img
            class="h-96 w-full object-cover md:h-full md:w-96"
            src={imageUrl}
            alt={title}
          />
        </div>
        <div class="p-8 flex flex-col justify-between">
          <div>
            <div
              class="uppercase tracking-wide text-lg text-indigo-500 font-semibold"
            >
              {title}
            </div>
            <p class="mt-4 text-gray-500 text-lg">{description}</p>
            <p class="mt-4 text-gray-900 font-bold text-3xl">{price} â‚¬</p>
          </div>
          <button
            class="mt-6 bg-indigo-500 text-white py-3 px-6 rounded hover:bg-indigo-600 text-lg"
          >
            Comprar
          </button>
        </div>
      </div>
    </div>
  </div>
</Layout>
